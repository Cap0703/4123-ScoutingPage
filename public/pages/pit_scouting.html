<!doctype html>
<html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Pit Scouting</title>
<link rel="stylesheet" href="/css/style.css"/>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
<div class="mobile-nav">
  <button class="hamburger" onclick="toggleMenu()">☰</button>
  <div class="mobile-menu" id="mobileMenu">
    <button class="mobile-menu-close" onclick="toggleMenu()">×</button>
    <a href="/" onclick="toggleMenu()">Home</a>
    <a href="/pages/match_scouting.html" onclick="toggleMenu()">Match Scouting</a>
    <a href="/pages/pit_scouting.html" onclick="toggleMenu()">Pit Scouting</a>
    <a href="/pages/team_summary.html" onclick="toggleMenu()">Team Summary</a>
    <a href="/pages/match_simulator.html" onclick="toggleMenu()">Match Simulator</a>
    <a href="/pages/rankings.html" onclick="toggleMenu()">Rankings</a>
    <a href="/pages/raw_match.html" onclick="toggleMenu()">Raw Match Data</a>
    <a href="/pages/raw_match_edit.html" onclick="toggleMenu()">Raw Match Data Edit</a>
    <a href="/pages/raw_pit.html" onclick="toggleMenu()">Raw Pit Data</a>
    <a href="/pages/raw_pit_edit.html" onclick="toggleMenu()">Raw Pit Data Edit</a>
    <a href="/pages/csv_upload.html" onclick="toggleMenu()">CSV Upload</a>
    <a href="pages/config_creator.html" onclick="toggleMenu()">Config Creator</a>
  </div>
</div>
<script>
// Mobile menu functionality
function toggleMenu() {
  const menu = document.getElementById('mobileMenu');
  const isOpening = !menu.classList.contains('open');
  menu.classList.toggle('open');
  document.body.classList.toggle('menu-open', isOpening);
  if (isOpening) {
    setTimeout(() => {
      menu.scrollTop = 0;
    }, 50);
  }
}

// Close menu when clicking outside
document.addEventListener('click', function(event) {
  const menu = document.getElementById('mobileMenu');
  const hamburger = document.querySelector('.hamburger');
  if (menu.classList.contains('open') && 
      !menu.contains(event.target) && 
      event.target !== hamburger) {
    toggleMenu();
  }
});

// Close menu on escape key
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape') {
    const menu = document.getElementById('mobileMenu');
    if (menu.classList.contains('open')) {
      toggleMenu();
    }
  }
});

// Prevent background scrolling when menu is open
document.addEventListener('touchmove', function(event) {
  const menu = document.getElementById('mobileMenu');
  if (menu.classList.contains('open')) {
    if (!menu.contains(event.target)) {
      event.preventDefault();
    }
  }
}, { passive: false });
</script>

<!-- Original navbar (hidden on mobile) -->
<nav class="navbar">
  <a href="/">Home</a>
  <a href="/pages/match_scouting.html">Match Scouting</a>
  <a href="/pages/pit_scouting.html">Pit Scouting</a>
  <a href="/pages/team_summary.html">Team Summary</a>
  <a href="/pages/match_simulator.html">Match Simulator</a>
  <a href="/pages/rankings.html">Rankings</a>
  <a href="/pages/raw_match.html">Raw Match Data</a>
  <a href="/pages/raw_match_edit.html">Raw Match Data Edit</a>
  <a href="/pages/raw_pit.html">Raw Pit Data</a>
  <a href="/pages/raw_pit_edit.html">Raw Pit Data Edit</a>
  <a href="/pages/csv_upload.html">CSV Upload</a>
  <a href="/pages/config_creator.html">Config Creator</a>
</nav>
<div class="container">
  <h1>Pit Scouting</h1>
  <div id="pit-root"></div>
  <div class="center" style="margin-top:12px">
    <button id="submit" class="btn">Submit Pit Entry</button>
    <div id="result" class="badge"></div>
  </div>
</div>
<footer>FRC 4123 Scouting • Config-driven • SQLite</footer>
<script type="module">
  import { buildPitForm } from "/js/dynamic_form.js";
  const app = await buildPitForm(document.getElementById('pit-root'));
  document.getElementById('submit').addEventListener('click', async ()=>{
    const res = await app.submit();
    document.getElementById('result').textContent = `Saved Pit #${res.id}`;
  });
</script>

</body></html>